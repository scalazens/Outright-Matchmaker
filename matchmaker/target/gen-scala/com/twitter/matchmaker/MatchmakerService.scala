package com.twitter.matchmaker

// Autogenerated

import java.net.InetSocketAddress
import java.util.{List => JList, Map => JMap, Set => JSet}
import scala.collection._
import scala.collection.JavaConversions._
import org.apache.thrift.protocol._

import com.twitter.conversions.time._
import com.twitter.finagle.builder._
import com.twitter.finagle.stats._
import com.twitter.finagle.thrift._
import com.twitter.logging.Logger
import com.twitter.ostrich.admin.Service
import com.twitter.util._

trait MatchmakerService {
  implicit def voidUnit(f: Future[_]): Future[java.lang.Void] = f.map(x=>null)

  
    def put(key: String, value: String): Future[Void]
  
    def get(key: String): Future[String]
  

  def toThrift = new MatchmakerServiceThriftAdapter(this)
}

trait MatchmakerServiceServer extends Service with MatchmakerService{
  val log = Logger.get(getClass)

  def thriftCodec = ThriftServerFramedCodec()
  val thriftProtocolFactory = new TBinaryProtocol.Factory()
  val thriftPort: Int
  val serverName: String

  var server: Server = null

  def start = {
    val thriftImpl = new com.twitter.matchmaker.thrift.MatchmakerService.Service(toThrift, thriftProtocolFactory)
    val serverAddr = new InetSocketAddress(thriftPort)
    server = ServerBuilder().codec(thriftCodec).name(serverName).reportTo(new OstrichStatsReceiver).bindTo(serverAddr).build(thriftImpl)
  }

  def shutdown = synchronized {
    if (server != null) {
      server.close(0.seconds)
    }
  }
}

class MatchmakerServiceThriftAdapter(val matchmakerService: MatchmakerService) extends com.twitter.matchmaker.thrift.MatchmakerService.ServiceIface {
  val log = Logger.get(getClass)
  def this() = this(null)

  
    def put(key: String, value: String) = {
      matchmakerService.put(key, value)
      
      
    }
  
    def get(key: String) = {
      matchmakerService.get(key)
      
        .map[String] { retval =>
          retval
        }
      
      
    }
  
}

class MatchmakerServiceClientAdapter(val matchmakerService: com.twitter.matchmaker.thrift.MatchmakerService.ServiceIface) extends MatchmakerService {
  val log = Logger.get(getClass)
  def this() = this(null)

  
    def put(key: String, value: String) = {
      matchmakerService.put(key, value)
      
      
    }
  
    def get(key: String) = {
      matchmakerService.get(key)
      
        .map[String] { retval =>
          retval
        }
      
      
    }
  
}
